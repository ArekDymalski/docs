<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Backlift Documentation</title>
    <link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Droid+Sans&subset=latin">
    <link type="text/css" rel="stylesheet" href="/docs/css/reset.css">
    <link type="text/css" rel="stylesheet" href="/docs/css/docs.css">
    <link type="text/css" rel="stylesheet" href="/docs/css/print.css" media="print">
    <link type="text/css" rel="stylesheet" href="http://yandex.st/highlightjs/6.1/styles/default.min.css">
    
        <link type="text/css" rel="stylesheet" href="style.css">
    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://yandex.st/highlightjs/6.1/highlight.min.js"></script>
    
    <script type="text/javascript" src="/docs/js/viewer.js"></script>
</head>
<body>
    <div id="page">
        <a name="top" />
        
            <header id="header">
                <h1><a href="/docs/">Backlift Documentation</a></h1>
            </header>
        
        <div id='content'><a name="backlift"></a><h1>Backlift</h1>
<a name="introduction"></a><h2>Introduction</h2>
<p>Backlift wants to make building and deploying websites easier, faster and more creative. 

</p>
<p>Backlift&#39;s server, templates and helper libraries support:

</p>
<ul>
<li><strong>Asynchronous updates:</strong> Build apps that respond immediately to user actions while data is sent the the server in the background. </li>
<li><strong>API discovery:</strong> Backlift will let you persist data without specifying the API up front. If you follow standard RESTful conventions, backlift will accept whatever data you throw at it.</li>
<li><strong>Familiar libraries:</strong> Backlift currently works with <a href="http://backbonejs.org">Backbone.js</a>. We plan to integrate other javascript MVC libraries in the future.</li>
</ul>
<p>Backlift&#39;s goals are to facilitate:

</p>
<ul>
<li>rapid user experience prototyping,</li>
<li>learning to write front-end javascript code, and eventually,</li>
<li>deploying production websites used by millions.</li>
</ul>
<p>Please visit <a href="https://www.backlift.com">backlift.com</a> to access your backlift account.

</p>
<p>Bugs or feature requests for backlift can be submitted to the <a href="http://github.com/backlift/docs/issues">issues</a> page of this documentation&#39;s github project.

</p>
<p>Our roadmap is posted <a href="http://roadma.ps/28R">here</a>.

</p>
<p>The source to this documentation is available <a href="http://github.com/backlift/docs">on github</a>. We will happily accept pull requests to the docs.


</p>
<a name="getting-started"></a><h1>Getting Started</h1>
<a name="setup-the-backlift-command-line-utility"></a><h2>Setup the Backlift Command Line Utility</h2>
<p>Open up your terminal and download the Backlift Command Line Interface (CLI) by typing:

</p>
<pre><code>sudo easy_install backlift</code></pre>
<p>Alternatively, you can use pip to install the Backlift CLI into a virtual environment.

</p>
<p>Once you have backlift installed, create an account at <a href="https://backlift.com">backlift.com</a> by clicking on the &#39;Sign-in&#39; button in the upper right corner. You will need a registration key. In order to obtain one please click the &#39;Get Early Access&#39; link and supply your email address. We will send you a key as soon as possible.

</p>
<p>Once you have your api-key, setup backlift with the command:

</p>
<pre><code>backlift setup &lt;api-key&gt;</code></pre>
<p>Now you&#39;re ready to create new apps and upload them to backlift.

</p>
<p>From time to time you should make sure that you have the most recent version of the Backlift CLI. You can check that by typing <code>backlift --version</code>. It should match the &#39;Backlift CLI current version&#39; listed on your account dashboard. You can update your Backlift CLI by entering the command 

</p>
<pre><code>sudo easy_install --update backlift.</code></pre>
<a name="create-and-upload-a-new-app"></a><h2>Create and Upload a new app</h2>
<p>Create a new app with the command:

</p>
<pre><code>backlift create newapp</code></pre>
<p>This will create a new folder in the current directory called &#39;newapp&#39; and begin downloading the backlift default project template. Once the project template has finished downloading, check it out by opening the &#39;newapp&#39; folder with a text editor.

</p>
<p>To see this app running on a public web server, first change directories into the &#39;newapp&#39; folder and type &#39;backlift push&#39;.

</p>
<pre><code>cd newapp
backlift push</code></pre>
<p>This will upload the content of the &#39;newapp&#39; folder to Backlift. Alternatively you can use the command:
    <code>backlift watch</code>

</p>
<p>The watch command will first upload the &#39;newapp&#39; folder and then wait for changes to the project. Any time you edit and save a file in the &#39;newapp&#39; folder while the watch command is running, your changes will automatically by synced to Backlift.


</p>
<a name="view-and-manage-your-app"></a><h2>View and manage your app</h2>
<p>You can launch a browser to view your app by typing:

</p>
<pre><code>backlift open</code></pre>
<p>You can alternatively view the website&#39;s admin page by typing:

</p>
<pre><code>backlift admin</code></pre>
<p>That&#39;s all there is to getting started. The demo template contains a tutorial that will show you how to build a backbone.js app with Backlift. You can run it by typing:

</p>
<pre><code>backlift create:demo demoapp</code></pre>

<a name="backlift-basics"></a><h1>Backlift basics</h1>
<a name="app-templates"></a><h2>App templates</h2>
<p>Backlift comes with a set of examples and starter templates that you can access directly with the backlift create command. Just type:

</p>
<pre><code>backlift create:&lt;template_name&gt; newapp </code></pre>
<p>You can find a list of available templates on github at <a href="http://github.com/backlift/backlift-templates">http://github.com/backlift/backlift-templates</a>.

</p>
<p>We&#39;d love to add your example or starter template to the backlift command line utility. Just submit a pull request to the github project above. We&#39;ll evaluate it and, if we approve, we&#39;ll make it available directly by typing <code>backlift create:&lt;your app here&gt;</code>.

</p>
<a name="project-layout"></a><h2>Project layout</h2>
<p>At the root of your app is a public folder. This contains all the publicly accessible files that make up your webapp. At a minimum your backlift app should have a main javascript file, one ore more handlebars or underscore templates and a CSS file. Typically these files will be placed in the following folders:

</p>
<ul>
<li><p><strong>/public/app/scripts/ </strong>: At a minimum this folder should contain a main.js file that defines a Backbone router. This file can also contain .js files for your data Models and Collections, and Views that display the data.</p>
</li>
<li><p><strong>/public/app/templates/ </strong>: This folder should contain templates using either the underscore or handlebars template syntax. They should have the .jst or .handlebars extensions respectively. Templates are combined with data from your model and &quot;rendered&quot; into HTML. Also templates can be rendered heirarchically, allowing one template to act as a layout for the rest of the website. For more information about the template compilers please see the section on <a href="#compilers-and-optimization">compilers</a>. </p>
</li>
<li><p><strong>/public/app/styles/ </strong>: Should contain .css files that define the look and layout of your webapp.</p>
</li>
</ul>
<p>There are a few additional project files:

</p>
<ul>
<li><p><strong>the /public/libraries folder</strong>: This is where third party libraries, such as bootstrap.css and backbone.js go.</p>
</li>
<li><p><strong>the /public/setup.js file</strong>: For some backlift template, a setup javascript file is used to create the App namespace.</p>
</li>
<li><p><strong>the config.yml file</strong>: This is the configuration file that determines how your project is packaged, and can be used to define server side validation rules.</p>
</li>
</ul>
<p>After your files are uploaded using <code>backlift push</code> they will be publicly accessible at:

</p>
<pre><code>https://&lt;your_app_id&gt;.backliftapp.com/public/&lt;file_path&gt; </code></pre>
<p>This avoids conflicts between your public files, and paths that you might set up using your backbone router.

</p>
<p>You may have noticed that index.html was not on the above list. If no index.html file exists in the project, backlift will create one automatically that includes links to the scripts, styles, templates that were generated based on your config.yml file.

</p>
<a name="compilers-and-optimization"></a><h2>Compilers and optimization</h2>
<p>When you run <code>backlift push</code> your code is uploaded to the backlift server and optionally compiled and optimized. During the compilation phase, files with known extensions are compiled into javascript or css. During the optimization phase, javascript and css files are concatenated and minified. 

</p>
<p>The following is a list of the known file extensions, the type of file generated, and the associated compiler:

</p>
<ul>
<li>.coffeescript --&gt; .js (coffeescript compiler)</li>
<li>.jst --&gt; .js (underscore template compiler)</li>
<li>.handlebars --&gt; .js (handlebars template compiler)</li>
<li>.less --&gt; .css (less compiler)</li>
</ul>
<p>Backlift uses the YUI compressor to minify the concatenated javascript and css files.

</p>
<p>You can control which files are passed to the compilers by adding a <code>compile</code> directive to your project&#39;s config.yml file. The compile directive should include a list of files that will be compiled. The default, if no compile directive is specified, includes the following:

</p>
<pre><code class="no-highlight">compile:
- public/**/*.jst
- public/**/*.handlebars
- public/**/bootstrap*.less
- public/**/*.coffee
</code></pre>

<p>(Note that only the main bootstrap.less file will typically be compiled. This is because the bootstrap.less file imports several .less components. Attempting to pass those component .less files directly to the less compiler will result in an error.)

</p>
<p>Typically it will not be necessary to adjust the compile configuration. If no files of a particular kind exist, the compiler for that file type will not be invoked.

</p>
<p>Optimization can be enabled or disabled using the <code>optimize</code> setting within config.yml.

</p>
<pre><code>optimize: on</code></pre>
<p>By default optimization is disabled. This reduces the time required to build your webapp, and avoides the obscure code generated by minification. Optimization should not be used during development.

</p>
<p>If you do not include an index.html file in your project, one will be generated automatically that includes the results of the compile and optimize process. If you manually specify an index.html file, be sure to link the files generated by the compiler and optimizer. Compiled files will be named the same as their source file except for the extension. The optimizer will generate two files, <code>\public\optimized-scripts.js</code> and <code>\public\optmized-styles.css</code>.

</p>
<a name="the-admin-site"></a><h2>The admin site</h2>
<p>Each app gets a unique admin page that can be used for debugging and, in the future, managing security features like validation and authorization. You can view your app&#39;s admin page by running:

</p>
<pre><code>backlift admin</code></pre>
<p>from your app&#39;s working folder, or visit

</p>
<pre><code>https://www.backlift.com/admin#&lt;app_id&gt;</code></pre>
<p>As you develop your app, this page will change to reflect your app&#39;s collections and request history. This makes it a valuable debugging tool.


</p>
<a name="data-persistence"></a><h2>Data persistence</h2>
<p>When communicating with the Backlift server, as long as you prefix your AJAX urls with &quot;/backliftapp/&quot;, the backlift server will automatically store and fetch any json data that you send. For example, in backbone, you can set the url attribute of your collections, or the urlRoot attribute of your models using the &quot;/backliftapp/&quot; prefix and then use backbone&#39;s standard save or create methods.

</p>
<p>Specifically:

</p>
<ul>
<li><p>GET /backliftapp/&lt;collection&gt;: will retrieve a list of the items in the collection.</p>
</li>
<li><p>POST /backliftapp/&lt;collection&gt;: will create a new item and add it to the collection.</p>
</li>
<li><p>PUT /backliftapp/&lt;collection&gt;/&lt;item_id&gt;: will update an item in the collection.</p>
</li>
<li><p>DELETE /backliftapp/&lt;collection&gt;/&lt;item_id&gt;: will delete an item.</p>
</li>
</ul>
<p>The data should be sent in the request body, and can either be a JSON object or a url-encoded set of key-value pairs. 

</p>
<p>Backlift stores the data as JSON documents. That means you don&#39;t need to spend time defining the schema in advance. Backlift will happily persist any object with any set of attributes and make it available for retreival. Later when you want to deploy your app in a production environment, you can setup validation via the config.yml config file or the admin panel. (coming soon!)


</p>
<a name="special-object-attributes"></a><h2>Special object attributes</h2>
<p>Each time the backlift server persists a new object, a few attributes are applied automatically:

</p>
<ul>
<li><p><strong>&#39;id&#39;</strong>: If no id is set, the server will assign a unique uuid to each model and store it in the &#39;id&#39; attribute. If there is an id, backlift will ensure that it is unique. </p>
</li>
<li><p><strong>&#39;_owner&#39;</strong>: This attribute is automatically assigned to the currently logged-in user&#39;s id attribute, if there is a currently logged-in user. This value is read-only.</p>
</li>
<li><p><strong>&#39;_created&#39;</strong>: When a new object is created, this attribute is set with the current date and time in ISO standard format. This value is read-only.</p>
</li>
<li><p><strong>&#39;_modified&#39;</strong>: Each time an object is updated, this attribute is set with the current date and time in ISO standard format. This value is read-only.</p>
</li>
<li><p><strong>&#39;_id&#39;</strong>: Backlift mirrors the id attribute in an &#39;_id&#39; attribute. The &#39;_id&#39; attribute is the primary attribute used to store and retrieve data by the backlift database. In the future this attribute may be filtered out, so don&#39;t use it.</p>
</li>
</ul>

<a name="validation"></a><h1>Validation</h1>
<blockquote>
<p>   alert: This section documents preliminary functionality. 
   The functionality described below is still under development.

</p>
</blockquote>
<a name="backlift-collections-and-schemas"></a><h2>Backlift collections and schemas</h2>
<p>In backlift, the universal container is the collection. Collections are like tables in a database and are defined by a set of attributes, or fields. In backlift individual models in a collection don&#39;t need to contain all the attributes of their sibling models. However, if any of the models in a collection contain an attribute, it will be considered a part of that collection&#39;s schema.

</p>
<p>By default there are no validation rules on any models in backlift. Anything can be stored in a collection, and new collections can be created on the fly. This is useful during development when the data model of an application is changing regularly. Later, when the application is ready for production, schema validation rules may be applied to &quot;lock down&quot; the kinds of data that backlift accepts.

</p>
<a name="defining-schemas"></a><h2>Defining schemas</h2>
<p>Currently backlift validation rules must be created using the config.yml configuration file. Here is an example section of the config.yml file that sets up a validation rule:

</p>
<pre><code>collections:
  tweets:
    message: {type: &#39;string&#39;, max: 140, required: yes}
    (other rules...)
  (other collections...)</code></pre>
<p>Each sub group under &#39;collections&#39; defines a new collection. When an AJAX request is sent to a /backliftapp/collection URL, backlift searches for the collection in this list. When found, the data attributes are matched against the rule names in order to select validation tests. If the data passes the tests for all attributes, the operation is permitted. 

</p>
<p>For a discussion of the permissions attributes used during authorization, see the <a href="authorization.html">authorization</a> section.

</p>
<p>The syntax for defining a new rule is:

</p>
<pre><code>&lt;field name&gt;: {[type: &#39;&lt;rule type&gt;&#39;,] &lt;parameter name&gt;: &lt;value&gt; [...]}</code></pre>
<p>If the rule &#39;type&#39; is omitted, it will be assumed to be a &#39;string&#39;.

</p>
<a name="validation-errors"></a><h2>Validation errors</h2>
<p>If one or more validation tests fail, backlift will return a 400 response along with a JSON object containing error data. The error data structure will look like this:

</p>
<pre><code>{&quot;form_errors&quot;: {
    &quot;message&quot;: [&quot;exceeds 140 character limit&quot;],
    &quot;otherfield&quot;: [&quot;required&quot;],
    &quot;&quot;: [&quot;other problems&quot;],
}}</code></pre>
<p>Each attribute of the &#39;form_errors&#39; hash is a field name, and the value is a list of error messages. The empty string attribute indicates form-wide errors.

</p>
<a name="validation-rule-reference"></a><h2>Validation rule reference</h2>
<p>The following is a list of validation rule types, and their type specific parameters.

</p>
<ul>
<li><p>&#39;<strong>string</strong>&#39; (min, max):
A string with an optional minimum and maximum length. This is the default validation type for all rules.</p>
</li>
<li><p>&#39;<strong>regex</strong>&#39; (regex):
A string that must match a regular expression. </p>
</li>
<li><p>&#39;<strong>identifier</strong>&#39;:
A strictly alpha-numeric string at least 2 characters long and no more than 30 characters long. (It must match the regular expression &#39;^[a-zA-Z0-9]{2,30}$&#39;) In addition identifiers are forced to lower-case when validated. Identifiers are used primarily for things like usernames and app IDs.</p>
</li>
<li><p>&#39;<strong>password</strong>&#39;: 
A string at least 8 characters long and no longer than 30 characters.</p>
</li>
<li><p>&#39;<strong>email</strong>&#39;:
Must be a valid email address.</p>
</li>
<li><p>&#39;<strong>list</strong>&#39;:
Must be a strig of the form &#39;[&quot;item&quot;, &quot;item&quot;, ...]&#39;. Allows string representations of lists to be stored and retreived without requiring json deserialization.</p>
</li>
<li><p>&#39;<strong>auto:uuid</strong>&#39;:
A string that matches the regex pattern &#39;^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$&#39;. A random uuid matching this pattern will be substituted for this attribute&#39;s value when the object is initially created.</p>
</li>
<li><p>&#39;<strong>auto:unique_uuid</strong>&#39;:
A string that matches the regex pattern &#39;^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$&#39;. A random uuid will be substituted for this attribute&#39;s value when the object is initially created. This value will be unique amongst values for this attribute on this collection.</p>
</li>
<li><p>&#39;<strong>auto:unique_16_aA0</strong>&#39;:
A string that matches the regex pattern &#39;^[a-zA-Z0-9]{16}$&#39;. A random string containing 16 alphanumeric characters, upper and lowercase, will be substituted for this attribute&#39;s value when the object is initially created. This value will be unique amongst values for this attribute on this collection.</p>
</li>
<li><p>&#39;<strong>auto:datetime</strong>&#39;:
The current date and time in ISO standard format will be substituted for this attribute&#39;s value when the object is first created.</p>
</li>
</ul>
<p>This list is incomplete at this time. We will update this list as new validation rules are created.

</p>
<p>We realize that it is impossible to perform all server side data validation using a predetermined finite set of validation rules. Our goal is not to cover all possibilities. We are currently working to define a reasonable set that covers as much territory as possible. We are also evaluating alternatives for how to handle more custom validation needs.


</p>
<a name="common-validation-rule-parameters"></a><h2>Common validation rule parameters</h2>
<p>All validation rules accept the generic parameters &#39;default&#39;, &#39;required&#39; and &#39;readonly&#39;. 

</p>
<ul>
<li><p>The &#39;default&#39; parameter sets the value if no value is specified for an attribute.</p>
</li>
<li><p>The &#39;required&#39; parameter will ensure that a value is supplied for an attribute if set. (The value cannot be the empty string, nor can the attribute be absent entirely.)</p>
</li>
<li><p>The &#39;readonly&#39; parameter will cause the server to quietly reject any changes made to that attribute if set.</p>
</li>
</ul>
<p>A common pattern is to set a value for the &#39;default&#39; parameter, and set &#39;readonly&#39; to &#39;yes&#39;. This has the same effect of setting a fixed value for an attribute. All new objects created with these parameters will have the default value set for this attribute, which cannot be changed. This technique is effective for setting permissions on objects. See the <a href="authorization.html">authorization</a> section for further discussion.

</p>

<a name="authorization"></a><h1>Authorization</h1>
<blockquote>
<p>   alert: This section documents preliminary functionality. 
   The functionality described below is still under development.

</p>
</blockquote>
<p>The authorization plugin provides an API for registering and establishing sessions for users, storing private and public user data, and setting permissions on data objects.

</p>
<p>All passwords are salted and hashed before being stored using <a href="http://bcrypt.sourceforge.net/">bcrypt</a>. Currently all requests to backlift apps are encrypted with ssl using backlift&#39;s certificates. (All backlift app urls use the https:// protocol) User session cookies are encrypted and managed by the backlift app server via this API. 

</p>
<a name="user-data"></a><h2>User data</h2>
<p>Users are stored in a special collection within each app that can only be accessed through the auth API. A user model has the following schema (see <a href="validation.html#validation-rule-reference">validation section</a> for type reference).

</p>
<p>The user model:

</p>
<pre><code>&#39;id&#39;:           {&#39;type&#39;: &#39;auto:unique_16_aA0&#39;, &#39;readonly&#39;: True}
&#39;username&#39;:     {&#39;type&#39;: &#39;identifier&#39;, &#39;unique&#39;: True}
&#39;email&#39;:        {&#39;type&#39;: &#39;email&#39;, &#39;unique&#39;: True}
&#39;groups&#39;:       {&#39;type&#39;: &#39;list&#39;}
&#39;profile&#39;:      &lt;a profile model&gt;</code></pre>
<p>The user collection cannot be fetched. Only the single user model for the currently signed in user is accessible. Custom properties may be added to the user model which will remain private to the current user. For this reason, the user model is a good place to keep track of user preferences.

</p>
<p>The user model contains a reference to a profile model. The profiles collection is separate and can be accessed like any other collection. (See the data persistence section in <a href="basics.html#data-persistence">basics</a>) By default the name of the profile collection is &#39;profiles&#39;. It&#39;s default permissions for each profile object match the system wide default permissions. (see permissions <a href="#permissions-and-access-control">below</a>) Therefore profile models are publicly readonly by default, and fetching the profiles collection will yeild a list of user profiles. Custom properties may be added to a profile object, and they will be publicly accessible by default. For this reason, the profile object is a good place to store per-user public data.

</p>
<p>The profile model:

</p>
<pre><code>&#39;id&#39;:           {&#39;type&#39;: &#39;auto:unique_16_aA0&#39;, &#39;readonly&#39;: True}
&#39;username&#39;:     {&#39;type&#39;: &#39;identifier&#39;, &#39;readonly&#39;: True}</code></pre>
<p>Both the user and profile models include the special object properties specified <a href="basics.html#special-object-attributes">here</a>.

</p>
<p>To get or set data for the current user, use the current user API:

</p>
<pre><code>GET         /backlift/auth/currentuser 
POST or PUT /backlift/auth/currentuser { &lt;user model&gt; }</code></pre>
<p>If you are setting the user model, the data should be sent in the request body, and can either be a JSON object or a url-encoded set of key-value pairs. Not all the data fields must be set, only the included fields will be altered. Note that if you are setting the profile field, you must use JSON, not url-encoded data.

</p>
<a name="creating-users-and-signing-in"></a><h2>Creating users and signing in</h2>
<p>Backlift exposes the following API to facilitate user creation and management. The data should be sent in the request body, and can either be a JSON object or a url-encoded set of key-value pairs. 

</p>
<ul>
<li><p><strong>Creating users:</strong> (POST /backlift/auth/register)</p>
<p>You can create new users by sending a POST request to your app&#39;s /backlift/auth/register URL. The data you send should contain a &#39;username&#39; attribute, an &#39;email&#39; attribute, and a &#39;password&#39; attribute or &#39;password1&#39; and &#39;password2&#39; attributes. </p>
<pre><code>POST /backlift/auth/register {&quot;username&quot;: &quot;...&quot;, &quot;email&quot;: &quot;...&quot;, &quot;password&quot;: &quot;...&quot;}</code></pre>
<p>There are several alternative API endpoints that permit creating users with just an email address, or requiring an email and username:</p>
<pre><code>POST /backlift/auth/registernoemail {&quot;username&quot;: &quot;...&quot;, &quot;password&quot;: &quot;...&quot;}
POST /backlift/auth/registeremailonly {&quot;email&quot;: &quot;...&quot;, &quot;password&quot;: &quot;...&quot;}</code></pre>
<p>The response will contain a json object with the new user&#39;s data. </p>
</li>
<li><p><strong>Logging in:</strong> (POST /backlift/auth/login)</p>
<p>To log in a user, POST to the login url with a pair of &#39;username&#39; and &#39;password&#39; attributes. They will be compared against the salted and hashed password store and if they match, the user will be logged in.</p>
<p>When a user is logged in, two cookies will be set on the client, a session ID and a &#39;user&#39; cookie that contains the user id.</p>
</li>
<li><p><strong>Logging out:</strong> (POST or GET /backlift/auth/logout)</p>
<p>To log out a user, POST or GET to the logout url.</p>
<p>If you send a GET request, you can include a &#39;_next&#39; url parameter with a redirect url where the user will be sent after being logged out. For example the following link will log out a user and return them to the &#39;dashboard&#39; page:</p>
<pre><code>&lt;a href=&quot;/backlift/auth/logout?_next=/dashboard&quot;&gt; Log out &lt;/a&gt;</code></pre>
<p>By default the user will be redirected to &#39;/&#39; if logged out via a GET request.</p>
</li>
</ul>
<a name="permissions-and-access-control"></a><h2>Permissions and access control</h2>
<p>Backlift&#39;s authorization module allows you to control access to persisted objects. In backlift you authorize access to data, and build behaviors around that. A user profile object may be marked as readonly, which means that the server will reject attempts to update the profile object unless the currently logged-in user is the owner of that profile object.

</p>
<p>Backlift uses the following attributes on objects in order to control access:

</p>
<ul>
<li><p><strong>_owner</strong>: Whenever a user is logged-in, any objects created will have the _owner attribute set to the current user&#39;s id. This attribute is read-only and managed by the server.</p>
</li>
<li><p><strong>_groups</strong>: A list of groups to which the object belongs.</p>
</li>
<li><p><strong>_public_permissions</strong>, <strong>_group_permissions</strong>, <strong>_owner_permissions</strong>: Govern what actions are authorized on this object. It is a string containing any of the following characters. If one of the characters below is included in the string, it will grant the associated permission:</p>
<ul>
<li><strong>&#39;r&#39;</strong>: read   </li>
<li><strong>&#39;w&#39;</strong>: write   </li>
<li><strong>&#39;c&#39;</strong>: create  </li>
<li><strong>&#39;d&#39;</strong>: delete</li>
</ul>
</li>
</ul>
<p>For example, the following object is only accessible to the owner:

</p>
<pre><code>{ &quot;_owner&quot;: &quot;...&quot;, 
  &quot;_id&quot;: &quot;...&quot;, 
  &quot;_owner_permissions&quot;: &quot;rwcd&quot;,
  &quot;_group_permissions&quot;: &quot;&quot;,
  &quot;_public_permissions&quot;: &quot;&quot;}</code></pre>
<p>These are the default permissions that an object will be assigned, if the respective permissions attributes are missing on an object:

</p>
<ul>
<li>owner: read, write, create, delete</li>
<li>group: read, write</li>
<li>public: read</li>
</ul>
<a name="using-validation-rules-to-set-permissions"></a><h2>Using validation rules to set permissions</h2>
<p>Authorization depends on validation to ensure that the model attributes responsible for controlling user access are correctly configured and not altered by malicious clients. Currently these rules are set using the config.yml file. Here are a few examples of how to correctly set permissions on your models using the &#39;collections&#39; hash in the config.yml file:

</p>
<ul>
<li><p>Making the models of a collection readonly for the public:</p>
<pre><code>collections:
  tweets:
    message: {type: &#39;string&#39;, max: 140, required: yes}
    _public_permissions: {default: &#39;r&#39;, readonly: yes}</code></pre>
<p>In this example, tweets can be created and modified by users, due to default owner permissions. In this case we&#39;ve explicitly specified that the public can only read tweets, not change them. Tweets currently only contain the message field, but could contain other attributes, such as the geo-location where the tweet was created.</p>
</li>
<li><p>Making a private user profile:</p>
<pre><code>collections:
  profiles:
    _public_permissions: {default: &#39;&#39;, readonly: yes}</code></pre>
<p>This object cannot be read by the public. However the owner and members of this object&#39;s group will have access based on the default permissions.</p>
</li>
</ul>

</div>
        <footer id="footer">
            Powered by <a href="http://github.com/maximebf/beautiful-docs">beautiful-docs</a> -
            <a href="#top">Back to top</a> - <a href="/docs/all.html">Everything on a single page</a>
            - <a href="?print=1">Print current page</a> - <a href="/docs/all.html?print=1">Print all pages</a>
            
        </footer>
    </div>
</body>
</html>
